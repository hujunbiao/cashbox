(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cc3dfe0"],{"0147":function(s,t,e){e("a29f"),e("0607"),e("949e"),e("7565"),e("dfda")},"01fb":function(s,t,e){},"0662":function(s,t,e){e("a29f"),e("adba")},1953:function(s,t,e){"use strict";var a=e("cb41"),n=e.n(a);n.a},"681e":function(s,t,e){e("a29f"),e("01fb")},"9b10":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"business_confirm_page"},[s._m(0),e("div",{staticClass:"business_info_group"},[e("div",{staticClass:"business_operation_group"},[e("span",{staticClass:"business_operation_key"},[s._v("操作类型")]),e("span",{staticClass:"business_operation_value"},[s._v(s._s(s.authTypeText))])]),e("van-divider",{staticClass:"divider_line"}),e("div",{staticClass:"business_name_group"},[e("span",{staticClass:"business_name_key"},[s._v("业务员名称")]),e("span",{staticClass:"business_name_value"},[s._v(s._s(s.businessModel.name))])]),e("van-divider",{staticClass:"divider_line"}),e("div",{staticClass:"business_address_group"},[e("span",{staticClass:"business_address_key"},[s._v("业务员地址")]),e("span",{staticClass:"business_address_value"},[s._v(s._s(s.businessModel.address))])]),e("van-divider",{staticClass:"divider_line"}),e("div",{staticClass:"business_address_group"},[e("span",{staticClass:"business_address_key"},[s._v("授权次数")]),e("span",{staticClass:"business_address_value"},[s._v(s._s(s.businessModel.maxCount))])]),e("van-divider",{staticClass:"divider_line"})],1),s._m(1),e("div",{staticClass:"up_chain_btn_group"},[e("van-button",{staticClass:"up_chain_btn",attrs:{plain:"",type:"info"},on:{click:s.onClickDConfirm}},[s._v(" 点击验证上链 ")])],1),e("van-overlay",{attrs:{show:s.isShowLoading}},[e("van-loading",{staticClass:"loading_component",attrs:{type:"spinner",vertical:""}},[s._v(s._s(s.loadHintInfo))])],1)],1)},n=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"confirm_message_title_group"},[e("span",{staticClass:"confirm_message_title"},[s._v("请确认操作信息")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"confirm_to_chain_group"},[e("span",{staticClass:"confirm_to_chain_title"},[s._v("输入密码签名，确认上链")])])}],i=(e("99af"),e("4160"),e("b0c0"),e("d3b7"),e("ac1f"),e("25f0"),e("5319"),e("498a"),e("159b"),e("bf19"),e("96cf"),e("c964")),o=e("276c"),r=e("e954"),c=e("e1a7"),l=e("f20d"),u=e("920b"),d=e("9ab4"),f=e("60a3"),h=e("b650"),b=e("6e47"),v=e("c7fe"),p=e("5487"),_=e("ef88"),g=(e("0662"),e("c2d8"),e("681e"),e("0147"),e("e815"),e("7c42")),y=e("8402");f["c"].use(h["a"]).use(b["a"]);var m=function(s){function t(){var s;return Object(o["a"])(this,t),s=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),s.businessModel=new _["b"],s.authTypeText="未知",s.signedValue="",s.isShowLoading=!1,s.loadHintInfo="信息上链进行中...",s}return Object(u["a"])(t,s),Object(r["a"])(t,[{key:"created",value:function(){this.$store.state.title="操作确认",window.nativeSignMsgToJsResult=this.nativeSignMsgToJsResult}},{key:"mounted",value:function(){this.businessModel=this.$store.state.nowBusiness,console.log("this.businessModel.authType===>"+this.businessModel.authType),this.businessModel.authType===_["a"].Auth?this.authTypeText="增加业务员":this.businessModel.authType===_["a"].Delete?this.authTypeText="删除业务员":g["a"].show("授权类型未知，请重新查证"),this.signedValue=this.businessModel.signInfo}},{key:"onClickDConfirm",value:function(){var s=this;this.isShowLoading=!0,this.loadHintInfo="拼接签名数据中...",console.log("this.businessModel.authAddress===>"+this.businessModel.authAddress+"||this.businessModel.authType===>"+this.businessModel.authType+"||this.businessModel.maxCount===>"+this.businessModel.maxCount+"||this.businessModel.name===>"+this.businessModel.name+"||this.businessModel.address===>"+this.businessModel.address),p["b"].getInstance().callBusinessOperation(this.businessModel.authType,this.$store.state.nativeChainAddress,this.businessModel.name,this.businessModel.address,this.businessModel.maxCount).then((function(t){s.isShowLoading=!1,null!==t&&void 0!==t&&""!==t.trim()?(console.log("callAddBusiness is ok, res======>"+t),g["a"].show("请输入该账户密码继续签名验证，完成后立即执行上链"),y["a"].getInstance().callNativeSignMsgToJs(t)):g["a"].fail("拼装上链数据格式出现错误，请查证后重新申请上链操作")})).catch((function(t){s.isShowLoading=!1,console.log("数据格式出现错误,reason:"+t),g["a"].show("数据格式出现错误，"+t)}))}},{key:"nativeSignMsgToJsResult",value:function(){var s=Object(i["a"])(regeneratorRuntime.mark((function s(t){var e=this;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:console.log("nativeSignMsgToJsResult res======>"+t),this.isShowLoading=!0,this.loadHintInfo="信息上链进行中...",p["b"].getInstance().sendToChain(t,(function(s){if(s.isFinalized){console.log("use balance is finished!===>");var t=s.asFinalized;p["b"].getInstance().loadApiPromise().then((function(s){s.query.system.events.at(t).then((function(s){e.isShowLoading=!1;var t=!1;s.forEach((function(s){var e=s.phase,a=s.event,n=a.data,i=a.method,o=a.section;"contracts"==o&&"ContractExecution"==i&&(console.log("contracts===>"+n.toJSON()),g["a"].show("信息上链已完成，可在浏览器查询交易状态",8e3),t=!0),console.log("forEach  =>"+e.toString()+"||section=>"+": ".concat(o,".").concat(i)+n.toString())})),t||g["a"].fail("信息上链失败，链上调用出现问题！~",8e3)}))}))}if(s.isBroadcast&&(console.log("status.isBroadcast===>"),console.log("use balance is finished!===>"),g["a"].show("信息上链已完成，可在浏览器查询交易状态")),s.isDropped)return e.isShowLoading=!1,console.log("status.isDropped===>"),void g["a"].fail("信息上链失败，操作已被丢弃");if(s.isInvalid)return e.isShowLoading=!1,console.log("status.isInvalid!===>"),void g["a"].fail("信息上链失败，无效操作");var a=e;setTimeout((function(){a.$router.push({name:"business_process"})}),1e3)})).catch((function(s){e.isShowLoading=!1,console.log("Error reason===>"+s),e.$router.replace({name:"business_entry"}),g["a"].fail("信息上链，出现错误！！！请重新检查信息")}));case 4:case"end":return s.stop()}}),s,this)})));function t(t){return s.apply(this,arguments)}return t}()}]),t}(f["c"]);m=Object(d["a"])([Object(f["a"])({components:{CertShow:v["a"]}})],m);var C=m,w=C,O=(e("1953"),e("2877")),S=Object(O["a"])(w,a,n,!1,null,"06057fa6",null);t["default"]=S.exports},a630:function(s,t,e){var a=e("23e7"),n=e("4df4"),i=e("1c7e"),o=!i((function(s){Array.from(s)}));a({target:"Array",stat:!0,forced:o},{from:n})},a866:function(s,t,e){},adba:function(s,t,e){},b650:function(s,t,e){"use strict";var a=e("c31d"),n=e("2638"),i=e.n(n),o=e("d282"),r=e("ba31"),c=e("b1d2"),l=e("48f4"),u=e("ad06"),d=e("543e"),f=Object(o["a"])("button"),h=f[0],b=f[1];function v(s,t,e,a){var n,o=t.tag,f=t.icon,h=t.type,v=t.color,p=t.plain,_=t.disabled,g=t.loading,y=t.hairline,m=t.loadingText,C={};function w(s){g||_||(Object(r["a"])(a,"click",s),Object(l["a"])(a))}function O(s){Object(r["a"])(a,"touchstart",s)}v&&(C.color=p?v:c["f"],p||(C.background=v),-1!==v.indexOf("gradient")?C.border=0:C.borderColor=v);var S=[b([h,t.size,{plain:p,loading:g,disabled:_,hairline:y,block:t.block,round:t.round,square:t.square}]),(n={},n[c["b"]]=y,n)];function M(){var a,n=[];return g?n.push(s(d["a"],{class:b("loading"),attrs:{size:t.loadingSize,type:t.loadingType,color:"currentColor"}})):f&&n.push(s(u["a"],{attrs:{name:f},class:b("icon")})),a=g?m:e.default?e.default():t.text,a&&n.push(s("span",{class:b("text")},[a])),n}return s(o,i()([{style:C,class:S,attrs:{type:t.nativeType,disabled:_},on:{click:w,touchstart:O}},Object(r["b"])(a)]),[M()])}v.props=Object(a["a"])({},l["c"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),t["a"]=h(v)},c5b7:function(s,t,e){"use strict";var a=e("a866"),n=e.n(a);n.a},c7fe:function(s,t,e){"use strict";var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"cert_detail_cls"},s._l(s.certMap,(function(t){return e("div",{staticClass:"item_cert_row"},[e("div",{staticClass:"item_group"},[e("span",{staticClass:"item_cert_key"},[s._v(s._s(t.key))]),e("span",{staticClass:"item_cert_value"},[s._v(s._s(t.value))])]),e("van-divider",{staticClass:"divider_line"})],1)})),0)},n=[];e("a4d3"),e("e01a"),e("d28b"),e("d81d"),e("d3b7"),e("3ca3"),e("ddb0");function i(s){if(Array.isArray(s)){for(var t=0,e=new Array(s.length);t<s.length;t++)e[t]=s[t];return e}}e("a630"),e("e260"),e("25f0");function o(s){if(Symbol.iterator in Object(s)||"[object Arguments]"===Object.prototype.toString.call(s))return Array.from(s)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(s){return i(s)||o(s)||r()}var l=e("276c"),u=e("e954"),d=e("e1a7"),f=e("f20d"),h=e("920b"),b=e("9ab4"),v=e("60a3"),p=e("9ed2");e("eeb2");v["c"].use(p["a"]);var _=function(s){function t(){return Object(l["a"])(this,t),Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments))}return Object(h["a"])(t,s),Object(u["a"])(t,[{key:"certMap",get:function(){this.certOwn||(this.certOwn=this.$store.state.nowCertOwn);var s=[];if(this.certOwn&&this.certOwn.certGia&&(s.push.apply(s,c(this.certOwn.certGia.toCert().map)),this.certOwn.certGia.toCert().i18n)){var t=!0,e=!1,a=void 0;try{for(var n,i=this.certOwn.certGia.toCert().map.keys()[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,r=this.certOwn.certGia.toCert().map[o],l=this.$t(r.key);l&&(r.key=l,s[o]=r)}}catch(u){e=!0,a=u}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}}return s}}]),t}(v["c"]);_=Object(b["a"])([Object(v["a"])({name:"CertCard"})],_);var g=_,y=g,m=(e("c5b7"),e("2877")),C=Object(m["a"])(y,a,n,!1,null,null,null);t["a"]=C.exports},cb41:function(s,t,e){},dfda:function(s,t,e){},e815:function(s,t,e){e("a29f"),e("8a5a")}}]);
//# sourceMappingURL=chunk-3cc3dfe0.e9cc4e78.js.map