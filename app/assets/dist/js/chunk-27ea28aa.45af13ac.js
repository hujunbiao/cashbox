(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27ea28aa"],{"0147":function(t,a,e){e("a29f"),e("0607"),e("949e"),e("7565"),e("dfda")},"01fb":function(t,a,e){},"0662":function(t,a,e){e("a29f"),e("adba")},"681e":function(t,a,e){e("a29f"),e("01fb")},8533:function(t,a,e){"use strict";var n=e("ae4b3"),i=e.n(n);i.a},a630:function(t,a,e){var n=e("23e7"),i=e("4df4"),o=e("1c7e"),s=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:s},{from:i})},a866:function(t,a,e){},adb9:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"upload_confirm_page"},[t._m(0),e("cert-show",{staticClass:"cert_show_card"}),e("div",{staticClass:"cert_sign_state_group"},[e("span",{staticClass:"cert_state_key"},[t._v("签名状态")]),e("span",{staticClass:"cert_state_value"},[t._v(t._s(t.certSignStateText))])]),t._m(1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpChainBtn,expression:"showUpChainBtn"}],staticClass:"up_chain_btn_group"},[e("van-button",{staticClass:"up_chain_btn",attrs:{plain:"",type:"info"},on:{click:t.onClickDConfirm}},[t._v(" 发送上链 ")])],1),e("van-overlay",{attrs:{show:t.isShowLoading}},[e("van-loading",{staticClass:"loading_component",attrs:{type:"spinner",vertical:""}},[t._v("信息上链进行中...")])],1)],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"confirm_message_title_group"},[e("span",{staticClass:"confirm_message_title"},[t._v("信息最后确认")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"confirm_to_chain_group"},[e("span",{staticClass:"confirm_to_chain_title"},[t._v("信息确认完毕，即可点击发送上链")])])}],o=(e("99af"),e("4160"),e("d3b7"),e("ac1f"),e("25f0"),e("5319"),e("159b"),e("bf19"),e("276c")),s=e("e954"),r=e("e1a7"),c=e("f20d"),l=e("920b"),u=e("9ab4"),d=e("60a3"),f=e("b650"),h=e("6e47"),p=e("c7fe"),b=(e("0662"),e("681e"),e("0147"),e("e815"),e("5487")),v=e("6848"),g=e("7c42");d["c"].use(f["a"]).use(h["a"]);var _=function(t){function a(){var t;return Object(o["a"])(this,a),t=Object(r["a"])(this,Object(c["a"])(a).apply(this,arguments)),t.showUpChainBtn=!0,t.isShowLoading=!1,t}return Object(l["a"])(a,t),Object(s["a"])(a,[{key:"created",value:function(){this.certOwn=this.$store.state.nowCertOwn,this.$store.state.title="信息上链",this.$store.state.nowCertOwn.attachInfo.certSignStatus===v["c"].Success?(this.certSignStateText="签名成功",this.showUpChainBtn=!0):(this.certSignStateText="签名失败",g["a"].fail("证书签名失败！建议您重新检查流程中的问题，先不提交证书"))}},{key:"onClickDConfirm",value:function(){var t=this;this.isShowLoading=!0,b["b"].getInstance().sendToChain(this.$store.state.nowCertOwn.attachInfo.certSignedInfo,(function(a){if(a.isFinalized){console.log("use balance is finished!===>");var e=a.asFinalized;console.log("Completed at block hash"+a.asFinalized.toHex()),b["b"].getInstance().loadApiPromise().then((function(n){n.query.system.events.at(e).then((function(e){t.isShowLoading=!1;var n=!1;e.forEach((function(t){var e=t.phase,i=t.event,o=i.data,s=i.method,r=i.section;"contracts"==r&&"ContractExecution"==s&&(console.log("contracts===>"+o.toJSON()),console.log("Completed at block hash"+a.asFinalized.toHex()),g["a"].show("信息上链已完成，可在浏览器查询交易状态",8e3),n=!0),console.log("forEach  =>"+e.toString()+"||section=>"+": ".concat(r,".").concat(s)+o.toString())})),n||g["a"].fail("信息上链失败，链上调用出现问题！~",8e3)}))}))}if(a.isBroadcast&&(console.log("status.isBroadcast===>"),console.log("use balance is finished!===>"),g["a"].show("信息上链已完成，可在浏览器查询交易状态")),a.isDropped)return console.log("status.isDropped===>"),void g["a"].fail("信息上链失败，操作已被丢弃");if(a.isInvalid)return console.log("status.isInvalid!===>"),void g["a"].fail("信息上链失败，无效操作");var n=t;t.isShowLoading=!1,setTimeout((function(){n.$router.replace("/frame/cert/process")}),1e3)})).catch((function(a){t.isShowLoading=!1,console.log("上链出现错误,reason:"+a),g["a"].show("上链出现错误，"+a)}))}}]),a}(d["c"]);_=Object(u["a"])([Object(d["a"])({components:{CertShow:p["a"]}})],_);var w=_,y=w,m=(e("8533"),e("2877")),C=Object(m["a"])(y,n,i,!1,null,"6a315b51",null);a["default"]=C.exports},adba:function(t,a,e){},ae4b3:function(t,a,e){},b650:function(t,a,e){"use strict";var n=e("c31d"),i=e("2638"),o=e.n(i),s=e("d282"),r=e("ba31"),c=e("b1d2"),l=e("48f4"),u=e("ad06"),d=e("543e"),f=Object(s["a"])("button"),h=f[0],p=f[1];function b(t,a,e,n){var i,s=a.tag,f=a.icon,h=a.type,b=a.color,v=a.plain,g=a.disabled,_=a.loading,w=a.hairline,y=a.loadingText,m={};function C(t){_||g||(Object(r["a"])(n,"click",t),Object(l["a"])(n))}function O(t){Object(r["a"])(n,"touchstart",t)}b&&(m.color=v?b:c["f"],v||(m.background=b),-1!==b.indexOf("gradient")?m.border=0:m.borderColor=b);var S=[p([h,a.size,{plain:v,loading:_,disabled:g,hairline:w,block:a.block,round:a.round,square:a.square}]),(i={},i[c["b"]]=w,i)];function j(){var n,i=[];return _?i.push(t(d["a"],{class:p("loading"),attrs:{size:a.loadingSize,type:a.loadingType,color:"currentColor"}})):f&&i.push(t(u["a"],{attrs:{name:f},class:p("icon")})),n=_?y:e.default?e.default():a.text,n&&i.push(t("span",{class:p("text")},[n])),i}return t(s,o()([{style:m,class:S,attrs:{type:a.nativeType,disabled:g},on:{click:C,touchstart:O}},Object(r["b"])(n)]),[j()])}b.props=Object(n["a"])({},l["c"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),a["a"]=h(b)},c5b7:function(t,a,e){"use strict";var n=e("a866"),i=e.n(n);i.a},c7fe:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cert_detail_cls"},t._l(t.certMap,(function(a){return e("div",{staticClass:"item_cert_row"},[e("div",{staticClass:"item_group"},[e("span",{staticClass:"item_cert_key"},[t._v(t._s(a.key))]),e("span",{staticClass:"item_cert_value"},[t._v(t._s(a.value))])]),e("van-divider",{staticClass:"divider_line"})],1)})),0)},i=[];e("a4d3"),e("e01a"),e("d28b"),e("d81d"),e("d3b7"),e("3ca3"),e("ddb0");function o(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}e("a630"),e("e260"),e("25f0");function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return o(t)||s(t)||r()}var l=e("276c"),u=e("e954"),d=e("e1a7"),f=e("f20d"),h=e("920b"),p=e("9ab4"),b=e("60a3"),v=e("9ed2");e("eeb2");b["c"].use(v["a"]);var g=function(t){function a(){return Object(l["a"])(this,a),Object(d["a"])(this,Object(f["a"])(a).apply(this,arguments))}return Object(h["a"])(a,t),Object(u["a"])(a,[{key:"certMap",get:function(){this.certOwn||(this.certOwn=this.$store.state.nowCertOwn);var t=[];if(this.certOwn&&this.certOwn.certGia&&(t.push.apply(t,c(this.certOwn.certGia.toCert().map)),this.certOwn.certGia.toCert().i18n)){var a=!0,e=!1,n=void 0;try{for(var i,o=this.certOwn.certGia.toCert().map.keys()[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,r=this.certOwn.certGia.toCert().map[s],l=this.$t(r.key);l&&(r.key=l,t[s]=r)}}catch(u){e=!0,n=u}finally{try{a||null==o.return||o.return()}finally{if(e)throw n}}}return t}}]),a}(b["c"]);g=Object(p["a"])([Object(b["a"])({name:"CertCard"})],g);var _=g,w=_,y=(e("c5b7"),e("2877")),m=Object(y["a"])(w,n,i,!1,null,null,null);a["a"]=m.exports},dfda:function(t,a,e){},e815:function(t,a,e){e("a29f"),e("8a5a")}}]);
//# sourceMappingURL=chunk-27ea28aa.45af13ac.js.map