{"version":3,"sources":["webpack:///./src/views/own/own_input.vue?8887","webpack:///./src/util/note.ts","webpack:///./src/views/own/own_input.vue?bbfc","webpack:///./src/views/own/own_input.vue?26fa","webpack:///./src/views/own/own_input.vue","webpack:///./src/views/own/own_input.vue?154c"],"names":["NoteType","render","_vm","this","_h","$createElement","_c","_self","staticClass","style","height","bodyHeight","_m","_v","_s","$t","giaNum","attrs","model","value","callback","$$v","inputMessage","expression","on","onClickSelfSign","staticRenderFns","list","Array","maxCount","note","length","pop","push","n","type","Error","message","duration","Notes","op","notes","New","use","showApplyBtn","signState","nextBtnShow","$store","state","title","window","nativeSignMsgToJsResult","document","documentElement","clientHeight","certOwn","nowCertOwn","certGia","gia","commit","nativeChainAddress","getInstance","assembleAddCertOwnInfo","res","console","log","callNativeSignMsgToJs","fail","add","toString","$router","name","immediate","deep","components","ScanSign","component"],"mappings":"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","file":"js/chunk-252eb0ed.e69a2ddf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"own_input_page\",style:({ height: _vm.bodyHeight + 'px' })},[_vm._m(0),_c('div',{staticClass:\"gia_info_group\"},[_c('div',{staticClass:\"gia_info_limit\"},[_c('span',{staticClass:\"gia_info_key\"},[_vm._v(_vm._s(_vm.$t('owns.giaNum')))]),_c('span',{staticClass:\"gia_info_value\"},[_vm._v(_vm._s(this.giaNum))])])]),_vm._m(1),_c('div',{staticClass:\"input_area_group\"},[_c('van-field',{staticClass:\"input_content\",attrs:{\"placeholder\":_vm.$t('notifyMsg.inputNineteen'),\"type\":\"textarea\",\"maxlength\":\"19\",\"rows\":\"2\",\"autosize\":\"\",\"show-word-limit\":\"\"},model:{value:(_vm.inputMessage),callback:function ($$v) {_vm.inputMessage=$$v},expression:\"inputMessage\"}})],1),_vm._m(2),_c('div',{staticClass:\"choice_btn_group\"},[_c('van-button',{staticClass:\"self_auth_btn\",attrs:{\"plain\":\"\",\"hairline\":\"\",\"type\":\"info\"},on:{\"click\":_vm.onClickSelfSign}},[_vm._v(\" \"+_vm._s(_vm.$t('owns.selfSign'))+\" \")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cert_title_group\"},[_c('span',{staticClass:\"cert_gia_title\"},[_vm._v(\"证书编号\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"up_chain_title_row\"},[_c('span',{staticClass:\"up_chain_title\"},[_vm._v(\"附加信息\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sign_method_title_group\"},[_c('span',{staticClass:\"sign_method_title\"},[_vm._v(\"签名上链\")])])}]\n\nexport { render, staticRenderFns }","\r\nimport {Notify} from 'vant';\r\nimport {VanNotify} from 'vant/types/notify';\r\n\r\nexport enum NoteType {\r\n    Error = 1,\r\n    Info,\r\n}\r\n\r\nexport interface Note {\r\n    type: NoteType;\r\n    message: string;\r\n}\r\n\r\n\r\nclass Notes {\r\n\r\n    public static New(): Notes {\r\n        return new Notes();\r\n    }\r\n\r\n    public static NewNote(op: {type: NoteType, message: string}): Note {\r\n        return op;\r\n    }\r\n    public list = new Array<Note>();\r\n    public maxCount = 100;\r\n\r\n    public add(note: Note): VanNotify {\r\n        while (this.list.length >= this.maxCount) {\r\n            this.list.pop();\r\n        }\r\n        this.list.push(note);\r\n\r\n        let type = 'success';\r\n        if (note.type === NoteType.Error) {\r\n            type = 'primary';\r\n        }\r\n        let n: VanNotify;\r\n        if ( note.type === NoteType.Error) {\r\n            n = Notify({message: note.message, duration: 1000, type: 'warning'});\r\n        } else {\r\n            n = Notify({message: note.message, duration: 1000, type: 'primary'});\r\n        }\r\n        return n;\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport const notes = Notes.New();\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Vue, Watch} from 'vue-property-decorator';\nimport {Button, Col, Field, Row, Divider} from 'vant';\nimport ScanSign from '@/components/scan_sign.vue';\nimport {notes, NoteType} from '@/util/note';\n\nimport 'vant/lib/field/style';\nimport 'vant/lib/row/style';\nimport 'vant/lib/col/style';\nimport 'vant/lib/button/style';\nimport 'vant/lib/divider/style';\nimport {CashboxJs} from '@/util/cashboxjs'\nimport {CertGia, CertOwn} from \"../../model/certs_model\";\nimport {DiamondUtil} from \"../../util/diamond_util\";\nimport {checkAddressInfo} from \"../../util/utils\";\nimport {ToastUtil} from \"../../util/toast\";\n\nVue.use(Field).use(Row).use(Col).use(Button).use(Divider);\n\n@Component({\n    components: {ScanSign},\n})\n\nexport default class Input extends Vue {\n    public inputMessage = '';\n    public giaNum = \"\";\n    public showApplyBtn = true;\n    public signState = false; // 暂替签名状态\n    public nextBtnShow = true;\n    public bodyHeight = 0;\n    private certOwn!: CertOwn;\n\n    public created(): void {\n        this.$store.state.title = this.$t('ownTitle.input');\n        {\n            (window as any).nativeSignMsgToJsResult = this.nativeSignMsgToJsResult;\n        }\n    }\n\n    public mounted() {\n        this.bodyHeight = document.documentElement.clientHeight * 93 / 100;  // 除去7%的title高度\n        this.certOwn = this.$store.state.nowCertOwn;\n        this.giaNum = this.certOwn.certGia.gia;\n    }\n\n    @Watch('signState', {immediate: true, deep: true})\n    private stateChange() {\n        if (this.signState) {\n            this.nextBtnShow = true;\n        } else {\n            this.nextBtnShow = false;\n        }\n    }\n\n    public async onClickSelfSign() {\n        if (this.inputMessage) {                              // 检查上链信息是否输入\n            this.$store.commit('updateCertAttachInputData', this.inputMessage);\n            //let nativeAddress = \"5DHob83qDK5KWgz9xeqXcyYpku7bnLWR2cuRzKQpkY4p7BzL\";  // todo 测试时候用： 业务员 freda 身份\n            this.$store.commit('updateNativeChainAddress', this.$store.state.nativeChainAddress);\n            if (checkAddressInfo(this.$store.state.nativeChainAddress)) {\n                let res = await DiamondUtil.getInstance().assembleAddCertOwnInfo(this.giaNum, this.inputMessage, this.$store.state.nativeChainAddress);\n                console.log(\"assembleAddCertOwnInfo===>\" + res);\n                CashboxJs.getInstance().callNativeSignMsgToJs(res);\n            } else {\n                ToastUtil.fail(\"当前钱包的地址，不能用于此条签名\");\n            }\n        } else {\n            notes.add({type: NoteType.Error, message: this.$t('notifyMsg.inputNineteen').toString()});\n        }\n        this.showApplyBtn = true;\n    }\n\n    public nativeSignMsgToJsResult(res: string): void {\n        console.log(\"own_input nativeSignMsgToJsResult===>\" + res);\n        this.$store.commit('updateNowCertSignedInfo', res);\n        this.$router.push({name: 'own_confirm'});\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./own_input.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./own_input.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./own_input.vue?vue&type=template&id=a01b87f2&scoped=true&\"\nimport script from \"./own_input.vue?vue&type=script&lang=ts&\"\nexport * from \"./own_input.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./own_input.vue?vue&type=style&index=0&id=a01b87f2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a01b87f2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./own_input.vue?vue&type=style&index=0&id=a01b87f2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./own_input.vue?vue&type=style&index=0&id=a01b87f2&scoped=true&lang=css&\""],"sourceRoot":""}