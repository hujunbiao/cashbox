(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e71539c"],{"0147":function(t,e,a){a("a29f"),a("0607"),a("949e"),a("7565"),a("dfda")},"01fb":function(t,e,a){},"0662":function(t,e,a){a("a29f"),a("adba")},"681e":function(t,e,a){a("a29f"),a("01fb")},8533:function(t,e,a){"use strict";var n=a("ae4b3"),i=a.n(n);i.a},a630:function(t,e,a){var n=a("23e7"),i=a("4df4"),o=a("1c7e"),s=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:s},{from:i})},a866:function(t,e,a){},adb9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload_confirm_page"},[t._m(0),a("cert-show",{staticClass:"cert_show_card"}),a("div",{staticClass:"cert_sign_state_group"},[a("span",{staticClass:"cert_state_key"},[t._v("签名状态")]),a("span",{staticClass:"cert_state_value"},[t._v(t._s(t.certSignStateText))])]),t._m(1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpChainBtn,expression:"showUpChainBtn"}],staticClass:"up_chain_btn_group"},[a("van-button",{staticClass:"up_chain_btn",attrs:{plain:"",type:"info"},on:{click:t.onClickDConfirm}},[t._v(" 发送上链 ")])],1),a("van-overlay",{attrs:{show:t.isShowLoading}},[a("van-loading",{staticClass:"loading_component",attrs:{type:"spinner",vertical:""}},[t._v("信息上链进行中...")])],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"confirm_message_title_group"},[a("span",{staticClass:"confirm_message_title"},[t._v("信息最后确认")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"confirm_to_chain_group"},[a("span",{staticClass:"confirm_to_chain_title"},[t._v("信息确认完毕，即可点击发送上链")])])}],o=(a("99af"),a("4160"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("bf19"),a("276c")),s=a("e954"),r=a("e1a7"),c=a("f20d"),l=a("920b"),u=a("9ab4"),d=a("60a3"),f=a("b650"),h=a("6e47"),p=a("c7fe"),b=(a("0662"),a("681e"),a("0147"),a("e815"),a("5487")),v=a("6848"),g=a("7c42");d["c"].use(f["a"]).use(h["a"]);var _=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.showUpChainBtn=!0,t.isShowLoading=!1,t}return Object(l["a"])(e,t),Object(s["a"])(e,[{key:"created",value:function(){this.certOwn=this.$store.state.nowCertOwn,this.$store.state.title="信息上链",this.$store.state.nowCertOwn.attachInfo.certSignStatus===v["c"].Success?(this.certSignStateText="签名成功",this.showUpChainBtn=!0):(this.certSignStateText="签名失败",g["a"].fail("证书签名失败！建议您重新检查流程中的问题，先不提交证书"))}},{key:"onClickDConfirm",value:function(){var t=this;this.isShowLoading=!0,b["b"].getInstance().sendToChain(this.$store.state.nowCertOwn.attachInfo.certSignedInfo,(function(e){if(e.isFinalized){console.log("use balance is finished!===>");var a=e.asFinalized;console.log("Completed at block hash"+e.asFinalized.toHex()),b["b"].getInstance().loadApiPromise().then((function(n){n.query.system.events.at(a).then((function(a){t.isShowLoading=!1;var n=!1;a.forEach((function(t){var a=t.phase,i=t.event,o=i.data,s=i.method,r=i.section;"contracts"==r&&"ContractExecution"==s&&(console.log("contracts===>"+o.toJSON()),console.log("Completed at block hash"+e.asFinalized.toHex()),g["a"].show("信息上链已完成，可在浏览器查询交易状态",8e3),n=!0),console.log("forEach  =>"+a.toString()+"||section=>"+": ".concat(r,".").concat(s)+o.toString())})),n||g["a"].fail("信息上链失败，链上调用出现问题！~",8e3)}))}))}if(e.isBroadcast&&(console.log("status.isBroadcast===>"),console.log("use balance is finished!===>"),g["a"].show("信息上链已完成，可在浏览器查询交易状态")),e.isDropped)return console.log("status.isDropped===>"),void g["a"].fail("信息上链失败，操作已被丢弃");if(e.isInvalid)return console.log("status.isInvalid!===>"),void g["a"].fail("信息上链失败，无效操作");var n=t;t.isShowLoading=!1,setTimeout((function(){n.$router.replace("/frame/cert/process")}),1e3)})).catch((function(e){t.isShowLoading=!1,console.log("上链出现错误,reason:"+e),g["a"].show("上链出现错误，"+e)}))}}]),e}(d["c"]);_=Object(u["a"])([Object(d["a"])({components:{CertShow:p["a"]}})],_);var w=_,y=w,m=(a("8533"),a("2877")),C=Object(m["a"])(y,n,i,!1,null,"6a315b51",null);e["default"]=C.exports},adba:function(t,e,a){},ae4b3:function(t,e,a){},b650:function(t,e,a){"use strict";var n=a("c31d"),i=a("2638"),o=a.n(i),s=a("d282"),r=a("ba31"),c=a("b1d2"),l=a("48f4"),u=a("ad06"),d=a("543e"),f=Object(s["a"])("button"),h=f[0],p=f[1];function b(t,e,a,n){var i,s=e.tag,f=e.icon,h=e.type,b=e.color,v=e.plain,g=e.disabled,_=e.loading,w=e.hairline,y=e.loadingText,m={};function C(t){_||g||(Object(r["a"])(n,"click",t),Object(l["a"])(n))}function O(t){Object(r["a"])(n,"touchstart",t)}b&&(m.color=v?b:c["f"],v||(m.background=b),-1!==b.indexOf("gradient")?m.border=0:m.borderColor=b);var S=[p([h,e.size,{plain:v,loading:_,disabled:g,hairline:w,block:e.block,round:e.round,square:e.square}]),(i={},i[c["b"]]=w,i)];function j(){var n,i=[];return _?i.push(t(d["a"],{class:p("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):f&&i.push(t(u["a"],{attrs:{name:f},class:p("icon")})),n=_?y:a.default?a.default():e.text,n&&i.push(t("span",{class:p("text")},[n])),i}return t(s,o()([{style:m,class:S,attrs:{type:e.nativeType,disabled:g},on:{click:C,touchstart:O}},Object(r["b"])(n)]),[j()])}b.props=Object(n["a"])({},l["c"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),e["a"]=h(b)},c5b7:function(t,e,a){"use strict";var n=a("a866"),i=a.n(n);i.a},c7fe:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cert_detail_cls"},t._l(t.certMap,(function(e){return a("div",{staticClass:"item_cert_row"},[a("div",{staticClass:"item_group"},[a("span",{staticClass:"item_cert_key"},[t._v(t._s(e.key))]),a("span",{staticClass:"item_cert_value"},[t._v(t._s(e.value))])]),a("van-divider",{staticClass:"divider_line"})],1)})),0)},i=[];a("a4d3"),a("e01a"),a("d28b"),a("d81d"),a("d3b7"),a("3ca3"),a("ddb0");function o(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}a("a630"),a("e260"),a("25f0");function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return o(t)||s(t)||r()}var l=a("276c"),u=a("e954"),d=a("e1a7"),f=a("f20d"),h=a("920b"),p=a("9ab4"),b=a("60a3"),v=a("9ed2");a("eeb2");b["c"].use(v["a"]);var g=function(t){function e(){return Object(l["a"])(this,e),Object(d["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),Object(u["a"])(e,[{key:"certMap",get:function(){this.certOwn||(this.certOwn=this.$store.state.nowCertOwn);var t=[];if(this.certOwn&&this.certOwn.certGia&&(t.push.apply(t,c(this.certOwn.certGia.toCert().map)),this.certOwn.certGia.toCert().i18n)){var e=!0,a=!1,n=void 0;try{for(var i,o=this.certOwn.certGia.toCert().map.keys()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,r=this.certOwn.certGia.toCert().map[s],l=this.$t(r.key);l&&(r.key=l,t[s]=r)}}catch(u){a=!0,n=u}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}}return t}}]),e}(b["c"]);g=Object(p["a"])([Object(b["a"])({name:"CertCard"})],g);var _=g,w=_,y=(a("c5b7"),a("2877")),m=Object(y["a"])(w,n,i,!1,null,null,null);e["a"]=m.exports},dfda:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5e71539c.71528655.js.map